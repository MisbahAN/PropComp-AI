# Data Directory

This directory contains all the data files used in the property recommendation system.

## Directory Structure

- `raw/`: Contains the original, unprocessed data
  - `appraisals_dataset.json`: Raw property appraisal data
    - Format: JSON array of appraisal objects
    - Each appraisal contains:
      - subject: Property being appraised
      - comps: List of comparable properties
      - properties: List of candidate properties
    - Expected size: 10-100MB depending on dataset size

- `cleaned/`: Contains cleaned and preprocessed data
  - `cleaned_appraisals_dataset.json`: Data after initial cleaning and standardization
    - All numeric fields standardized
    - Dates in ISO format
    - Units converted to standard measurements

- `engineered/`: Contains feature-engineered data
  - `feature_engineered_appraisals_dataset.json`: Data with additional features and transformations
    - Added feature differences
    - Binary flags for property types
    - Time-based features

- `training/`: Contains data ready for model training
  - `training_data.csv`: Processed data in CSV format for model training
    - One row per candidate property
    - Label column: is_comp (1 = good comp, 0 = not)
    - Feature columns: differences and flags
  - `training_data_with_feedback.csv`: Enhanced training data incorporating user feedback
    - Includes additional feedback-based features
    - Used for model retraining after user feedback
    - Maintains same structure as training_data.csv

- `geocoded-data/`: Contains geocoded property data
  - `geocoded_addresses.json`: JSON file containing geocoded coordinates for properties
    - Maps property addresses to latitude/longitude coordinates
    - Used for distance-based feature engineering
  - `missing_addresses.txt`: List of addresses that failed to geocode
    - Used for tracking and manual review

## Data Validation

Before running the pipeline, ensure:
1. Raw data is in correct JSON format
2. Required fields are present in each appraisal
3. Numeric values are within reasonable ranges
4. Dates are in valid format
5. Property types match expected categories
6. Addresses are properly formatted for geocoding

## Output Files

The `outputs/` directory contains:
- `top3.csv`: Raw top 3 comparable properties for each appraisal
  - Contains the model's raw predictions and scores
  - Used as input for generating explanations
  - Columns: orderID, candidate_address, score, rank
- `top3_gpt_explanations.csv`: Generated explanations for top 3 comparable properties
  - Columns: orderID, candidate_address, score, explanation
  - Generated by top3_explanations.py
  - Requires OpenAI API key 